<div class="schedule-view">
  <h2>Daily Schedule</h2>

  <input type="date" [value]="selectedDate | date:'yyyy-MM-dd'" (change)="onDateChange($any($event.target).value)" />

  <div *ngIf="loading" class="loading">Loading...</div>

  <div *ngIf="schedule && !loading">
    <p>Total: {{ formatMinutes(totalMinutes) }}</p>
    <p [class.balanced]="isBalanced" [class.unbalanced]="!isBalanced">
      Language Balance: {{ isBalanced ? 'Balanced' : 'Unbalanced' }}
    </p>

    <div class="distribution">
      <span>DE: {{ formatMinutes(languageDistribution['de']) }}</span>
      <span>PT: {{ formatMinutes(languageDistribution['pt']) }}</span>
      <span>FR: {{ formatMinutes(languageDistribution['fr']) }}</span>
    </div>

    <table>
      <thead>
        <tr><th>Time</th><th>Activity</th><th>Language</th><th>Duration</th></tr>
      </thead>
      <tbody>
        <tr *ngFor="let activity of schedule.activities">
          <td>{{ activity.time }}</td>
          <td>{{ activity.description }}</td>
          <td>{{ activity.language | uppercase }}</td>
          <td>{{ formatMinutes(activity.durationMinutes) }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
